
# Scout mini SLAM + Nav2 튜토리얼

## Scout mini 브링업

### [파이] 환경 설정
```
# ssh 접속
# 로컬 PC와 라즈베리파이가 같은 LAN에 있어야 함
ssh eddy@192.168.123.250

# ros2 환경설정
source ~/ros2_ws/install/setup.bash

# 빌드 및 실행
cd ~/ros2_ws
colcon build
source install/setup.bash
ros2 launch scout_base scout_base.launch.py

# can통신 확인
ip link show can0
```

### [로컬pc] 환경 설정
```
# ros2 환경 설정
source ~/ros2_ws/install/setup.bash

# 라즈베리파이와 통신할 수 있도록 ROS_DOMAIN_ID와 DDS 설정 맞추기
# 라즈베리파이에서도 동일하게 설정
# 라즈베리파이 IP를 ROS2에 알리기 (옵션, 일부 DDS에서는 필요)

export RPLIDAR_MODEL=A1
export ROS_DOMAIN_ID=30
export ROS_LOCALHOST_ONLY=0
export RMW_IMPLEMENTATION=rmw_fastrtps_cpp
source /opt/ros/humble/setup.bash
source ~/ros2_ws/install/setup.bash

```

### Rviz 환경설정
<img width="913" height="783" alt="image" src="https://github.com/user-attachments/assets/42af1e03-754e-4d7a-a0f4-0f95a74a8ec5" />


## nav2 실행

```bash
# 시뮬레이션
ros2 launch scout_navigation nav2.launch.py \
      namespace:=scout_mini \
      map_name:=/home/eddy/ros2_ws/maps/slamdunk.yaml \
      use_rviz:=false

# 실제 로봇
ros2 launch scout_navigation nav2.launch.py \
      use_sim_time:=False \
      map_name:=/home/eddy/ros2_ws/maps/slamdunk.yaml \
      nav2_params_file:=/home/eddy/ros2_ws/src/scout_navigation/config/nav2_params.yaml \
      use_rviz:=false

ros2 launch nav2_bringup bringup_launch.py \
    map:=/home/eddy/ros2_ws/maps/slamdunk.yaml \
    autostart:=true \
    use_sim_time:=false


```
| 순서 | 실행 위치 | 명령어                                                                   | 설명            |
| -- | ----- | --------------------------------------------------------------------- | ------------- |
| 1  | Local | `ros2 launch scout_description scout_base_description.launch.py`      | 로봇 모델 표시      |
| 2  | SSH   | `ros2 launch rplidar_ros rplidar.launch.py`                           | 라이다 실행        |
| 3  | SSH   | `ros2 launch slam_toolbox online_async_launch.py use_sim_time:=False` | SLAM 수행       |
| 4  | SSH   | `ros2 service call /slam_toolbox/save_map ...`                        | 맵 저장          |
| 5  | SSH   | `ros2 launch scout_bringup base_bringup.launch.py`                    | 로봇 bringup 실행 |
| 6  | SSH   | `ros2 launch nav2_bringup navigation_launch.py ...`                   | Nav2 실행       |
| 7  | Local | `ros2 run rviz2 rviz2`                                                | 자율주행 시각화      |


